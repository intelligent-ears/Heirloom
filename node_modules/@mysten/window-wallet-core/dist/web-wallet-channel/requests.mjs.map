{"version":3,"file":"requests.mjs","names":[],"sources":["../../src/web-wallet-channel/requests.ts"],"sourcesContent":["// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport * as v from 'valibot';\n\nexport type JsonData = string | number | boolean | null | { [key: string]: JsonData } | JsonData[];\n\nconst JsonSchema: v.GenericSchema<JsonData> = v.lazy(() =>\n\tv.union([\n\t\tv.string(),\n\t\tv.number(),\n\t\tv.boolean(),\n\t\tv.null(),\n\t\tv.record(v.string(), JsonSchema),\n\t\tv.array(JsonSchema),\n\t]),\n);\n\nexport const RequestData = v.variant('type', [\n\tv.object({\n\t\ttype: v.literal('connect'),\n\t}),\n\tv.object({\n\t\ttype: v.literal('sign-transaction'),\n\t\ttransaction: v.string('`transaction` is required'),\n\t\taddress: v.string('`address` is required'),\n\t\tchain: v.string('`chain` is required'),\n\t\tsession: v.string('`session` is required'),\n\t}),\n\tv.object({\n\t\ttype: v.literal('sign-and-execute-transaction'),\n\t\ttransaction: v.string('`transaction` is required'),\n\t\taddress: v.string('`address` is required'),\n\t\tchain: v.string('`chain` is required'),\n\t\tsession: v.string('`session` is required'),\n\t}),\n\tv.object({\n\t\ttype: v.literal('sign-personal-message'),\n\t\tchain: v.string('`chain` is required'),\n\t\tmessage: v.string('`message` is required'),\n\t\taddress: v.string('`address` is required'),\n\t\tsession: v.string('`session` is required'),\n\t}),\n]);\nexport type RequestDataType = v.InferOutput<typeof RequestData>;\n\nexport const Request = v.object({\n\tversion: v.literal('1'),\n\trequestId: v.pipe(v.string('`requestId` is required'), v.uuid()),\n\tappUrl: v.pipe(v.string(), v.url('`appUrl` must be a valid URL')),\n\tappName: v.string('`appName` is required'),\n\tpayload: RequestData,\n\tmetadata: v.optional(v.record(v.string(), JsonSchema)),\n\textraRequestOptions: v.optional(v.record(v.string(), JsonSchema)),\n});\nexport type RequestType = v.InferOutput<typeof Request>;\n"],"mappings":";;;AAOA,MAAM,aAAwC,EAAE,WAC/C,EAAE,MAAM;CACP,EAAE,QAAQ;CACV,EAAE,QAAQ;CACV,EAAE,SAAS;CACX,EAAE,MAAM;CACR,EAAE,OAAO,EAAE,QAAQ,EAAE,WAAW;CAChC,EAAE,MAAM,WAAW;CACnB,CAAC,CACF;AAED,MAAa,cAAc,EAAE,QAAQ,QAAQ;CAC5C,EAAE,OAAO,EACR,MAAM,EAAE,QAAQ,UAAU,EAC1B,CAAC;CACF,EAAE,OAAO;EACR,MAAM,EAAE,QAAQ,mBAAmB;EACnC,aAAa,EAAE,OAAO,4BAA4B;EAClD,SAAS,EAAE,OAAO,wBAAwB;EAC1C,OAAO,EAAE,OAAO,sBAAsB;EACtC,SAAS,EAAE,OAAO,wBAAwB;EAC1C,CAAC;CACF,EAAE,OAAO;EACR,MAAM,EAAE,QAAQ,+BAA+B;EAC/C,aAAa,EAAE,OAAO,4BAA4B;EAClD,SAAS,EAAE,OAAO,wBAAwB;EAC1C,OAAO,EAAE,OAAO,sBAAsB;EACtC,SAAS,EAAE,OAAO,wBAAwB;EAC1C,CAAC;CACF,EAAE,OAAO;EACR,MAAM,EAAE,QAAQ,wBAAwB;EACxC,OAAO,EAAE,OAAO,sBAAsB;EACtC,SAAS,EAAE,OAAO,wBAAwB;EAC1C,SAAS,EAAE,OAAO,wBAAwB;EAC1C,SAAS,EAAE,OAAO,wBAAwB;EAC1C,CAAC;CACF,CAAC;AAGF,MAAa,UAAU,EAAE,OAAO;CAC/B,SAAS,EAAE,QAAQ,IAAI;CACvB,WAAW,EAAE,KAAK,EAAE,OAAO,0BAA0B,EAAE,EAAE,MAAM,CAAC;CAChE,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAE,EAAE,IAAI,+BAA+B,CAAC;CACjE,SAAS,EAAE,OAAO,wBAAwB;CAC1C,SAAS;CACT,UAAU,EAAE,SAAS,EAAE,OAAO,EAAE,QAAQ,EAAE,WAAW,CAAC;CACtD,qBAAqB,EAAE,SAAS,EAAE,OAAO,EAAE,QAAQ,EAAE,WAAW,CAAC;CACjE,CAAC"}